<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html">

    <body>

        <ui:composition template="/WEB-INF/layout/plantillaProfesor.xhtml">

            <ui:define name="content">

                <h:form id="form">

                    <h1>Mis Datos Personales</h1> <br/>

                    <h:panelGrid id="profesor" columns="3" cellpadding="5">

                        <h:outputLabel value="Nombre/s: "/>
                        <h:outputText id="nombre" value="#{sessionManagedBean.profesor.nombre}"/>
                        <p:message for="nombre"/>

                        <h:outputLabel value="Apellidos/s: "/>
                        <h:outputText id="apellido" value="#{sessionManagedBean.profesor.apellido}"/>
                        <p:message for="apellido"/>

                        <h:outputLabel value="E-mail: "/>
                        <h:outputText id="email" value="#{sessionManagedBean.profesor.email}" style="width:100%"/>
                        <p:message for="email"/>

                        <h:outputLabel value="Contraseña: " for="pass"/>
                        <p:inplace>
                            <p:password id="pass" label="Contraseña" feedback="true" promptLabel="Ingrese una contraseña" weakLabel="Poco segura" requiredMessage="Ingresa una contraseña." 
                                        goodLabel="Segura" strongLabel="Muy segura" match="pass2" required="true" size="25" maxlength="25"
                                        value="#{sessionManagedBean.profesor.password}">
                                <f:validateRegex pattern="^[a-zA-Z0-9]+$" />
                                <f:validateLength minimum="6" maximum="25" />
                            </p:password>
                        </p:inplace>
                        <p:message for="pass"/>

                        <h:outputLabel value="Vuelve a ingresar la contraseña: " for="pass2"/>
                        <p:password id="pass2" label="Contraseña" required="true" size="25" maxlength="25" requiredMessage="Vuelve a ingresar la contraseña." validatorMessage="Vuelve a ingresar la contraseña correctamente."  
                                    value="#{sessionManagedBean.profesor.password}" redisplay="false">
                            <f:validateRegex pattern="^[a-zA-Z0-9]+$" />
                            <f:validateLength minimum="6" maximum="25" />
                        </p:password>
                        <p:message for="pass2"/>

                        <h:outputLabel value="DNI: "/>
                        <h:outputText id="dni" value="#{sessionManagedBean.profesor.dni}"/>
                        <p:message for="dni"/>

                        <h:outputLabel value="Fecha de nacimiento: "/>
                        <h:outputText id="nacimiento" value="#{sessionManagedBean.profesor.fechaNacimiento}" style="width:100%">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </h:outputText>
                        <p:message for="nacimiento"/>

                        <h:outputLabel value="Teléfono: "/>
                        <p:inplace>
                            <p:inputText id="telefono" value="#{sessionManagedBean.profesor.telefono}" required="true" size="8" maxlength="8" requiredMessage="Ingresa tu número de teléfono." validatorMessage="Ingresa tu teléfono correctamente.">
                                <f:validateRegex pattern="^[0-9]+$" />
                                <f:validateLength minimum="8" />
                            </p:inputText>
                        </p:inplace>
                        <p:message for="telefono"/>

                        <h:outputLabel value="Celular: "/>
                        <p:inplace>
                            <p:inputMask id="celular" value="#{sessionManagedBean.profesor.celular}" mask="(999)159999-9999" required="true" size="16" maxlength="16" requiredMessage="Ingresa tu número de celular." validatorMessage="Ingresa tu celular correctamente.">
                                <f:validateRegex pattern="^[0-9)(-]+$" />
                                <f:validateLength minimum="16"/>
                            </p:inputMask>
                        </p:inplace>
                        <p:message for="celular"/>

                        <h:outputLabel value="Dirección: "/>
                        <p:inplace>
                            <p:inputText id="direccion" value="#{sessionManagedBean.profesor.direccion}" required="true" size="25" maxlength="25" requiredMessage="Ingresa tu dirección." validatorMessage="Ingresa tu dirección correctamente.">
                                <f:validateRegex pattern="^[a-zA-Z0-9.ñ ]+$" />
                                <f:validateLength minimum="3" maximum="25"/>
                            </p:inputText>
                        </p:inplace>
                        <p:message for="direccion"/>

                        <h:outputLabel value="Localidad: "/>
                        <h:outputText id="localidad" value="#{sessionManagedBean.profesor.localidad.descripcion}"/>
                        <p:message for="localidad"/>

                    </h:panelGrid>

                    <br/><br/>

                    <p:commandButton id="modificar" value="Modificar" update="profesor" action="#{profesoresManagedBean.modificarmeProfesor(sessionManagedBean.profesor)}" 
                                     style="width:120px; height:60px; margin-left: 25px;" icon="ui-icon-check"/>

                    <br/><br/><br/>

                    <!-- Mensaje con resultados -->
                    <p:growl id="message" showDetail="true" autoUpdate="true"/>

                </h:form>

            </ui:define>

        </ui:composition>

    </body>
</html>
